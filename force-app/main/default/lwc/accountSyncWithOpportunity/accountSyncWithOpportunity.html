<template>
  <lightning-card
    variant="Narrow"
    title="Latest Opportunity related Accounts"
    icon-name="standard:opportunity"
  >
    <div class="slds-var-p-horizontal_small">
      <lightning-button
        variant="brand"
        label="Load latest opportunities"
        title="Load latest opportunities"
        onclick={handleLoadLatestOpportunities}
        icon-name="standard:dataset"
        class="slds-var-p-around_xxx-small"
      >
      </lightning-button>

      <template if:true={accountData.length}>
        <lightning-button
          variant="success"
          label="Sync Opp with Acc"
          title="Sync Opp with Acc"
          onclick={handleSync}
          icon-name="standard:loop"
          class="slds-var-p-around_xxx-small"
        >
        </lightning-button>
      </template>
    </div>
    <template if:true={accountData.length}>
      <div class="slds-var-m-around_small">
        <lightning-badge
          label="Latest closed won opportunities"
          class="slds-badge_inverse"
        ></lightning-badge>
        <lightning-badge
          label="Active account"
          class="slds-badge_inverse"
        ></lightning-badge>
      </div>
    </template>

    <template if:true={processing}>
      <lightning-spinner
        alternative-text="Loading"
        size="small"
      ></lightning-spinner>
    </template>

    <template if:true={accountData.length}>
      <lightning-button-icon
        icon-name="standard:loop"
        variant="border-filled"
        alternative-text="Sync"
        slot="actions"
        onclick={handleSync}
      ></lightning-button-icon>

      <div class="slds-var-m-around_medium">
        <template if:true={accountData.length}>
          <c-reusable-data-table
            card-title="Latest Opp related Account list"
            source-data={accountData}
            columns={accountColumns}
          ></c-reusable-data-table>
        </template>
      </div>
    </template>
  </lightning-card>
</template>
